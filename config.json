{
 "name": "QuotaConfig",
 "namespace": "MUSC\\QuotaConfig",
 "description": "This is a description of the module, and will be displayed below the module name in the user interface.",
 "authors": [
     {
          "name": "Andrew Cates",
          "email": "catesa@musc.edu",
          "institution": "MUSC"
      }
  ],
  "no-auth-pages": ["quota_enforcer"],
  "permissions": [
    "redcap_every_page_top",
    "redcap_data_entry_form_top"
  ],

  "project-settings": [
    {
      "key": "descriptive_text",
      "name": "*** Indicator fields assume 0 == No and 1 == Yes (a good field type to use for these would be 'Yes - No')",
      "type": "descriptive"
    },
    {
      "key": "quota_met_indicator",
      "name": "Quota Met Indicator",
      "required": true,
      "type": "field-list"
    },
    {
      "key": "included_in_quota_n",
      "name": "Included in Total N Count Indicator",
      "type": "field-list"
    },
    {
       "key": "accepted",
       "name": "Acceptance Message",
       "type": "textarea",
       "required": true,
       "default": "Accepted into Project"
    },
    {
       "key": "rejected",
       "name": "Quota Met Message",
       "type": "textarea",
       "required": true,
       "default": "Project is full at this time."
    },
    {
      "key": "quota_n",
      "name": "Total N",
      "type": "text",
      "required": true
    },
    {
      "key": "quota_n_enforced",
      "name": "Enforce Total",
      "type": "checkbox",
      "required": false
    },
    {
     "key": "quota_setting",
     "name": "Quota",
     "required": true,
     "type": "sub_settings",
     "repeatable":true,
     "sub_settings":[
     {
       "key": "quota_name_setting",
       "name": "Name/Value",
       "required": true,
       "type": "sub_settings",
       "repeatable":true,
       "sub_settings":[
         {
          "key": "field_name",
          "name": "Name",
          "required": true,
          "type": "field-list"
         },
         {
          "key": "field_selected",
          "name": "Value",
          "type": "text",
          "required": true
         }
       ]
      },
      {
       "key": "field_operator",
       "name": "Operator",
       "type": "dropdown",
       "choices": [
        {
          "value": "=",
          "name": "="
        },
        {
          "value": ">",
          "name": ">"
        },
        {
          "value": ">=",
          "name": ">="
        },
        {
          "value": "<",
          "name": "<"
        },
        {
          "value": "<=",
          "name": "<="
        },
        {
          "value": "<>",
          "name": "<>"
        }
       ],
       "required": true
      },
      {
        "key": "field_quantity",
        "name": "Quantity",
        "type": "text",
        "required": "true"
      },
      {
       "key": "field_quantifier",
       "name": "Quantity Type",
       "type": "dropdown",
       "choices": [
        {
          "value": "%",
          "name": "%"
        },
        {
          "value": "total",
          "name": "total"
        }
       ],
        "required": "true"
      }
     ]
    }
  ]
}
